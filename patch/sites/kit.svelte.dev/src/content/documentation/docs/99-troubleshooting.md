---
title: Возможные проблемы
---

### Серверный рендеринг

SvelteKit сначала рендерит любой компонент на стороне сервера и отправляет его клиенту в виде HTML. Затем он снова запустит компонент на стороне клиента, чтобы позволить ему обновляться на основе динамических данных. Поэтому необходимо убедиться, что компоненты могут работать как на стороне клиента, так и на стороне сервера.

Например, если компоненты попытаются получить доступ к глобальным переменным `document` или `window`, это приведет к ошибке, так как страница предварительно рендерится на стороне сервера.

Если нужен доступ к этим переменным, можно запустить код исключительно на стороне клиента, обернув его таким образом:

```js
import { browser } from '$app/env';

if (browser) {
	// client-only code here
}
```

В качестве альтернативы можно запустить его в функции `onMount`, поскольку она работает только в браузере. Это также хороший способ загрузить библиотеки, зависящие от объекта `window`:

```html
<script>
	import { onMount } from 'svelte';

	let awkward;

	onMount(async () => {
		const module = await import('some-browser-only-library');
		awkward = module.default;
	});
</script>
```

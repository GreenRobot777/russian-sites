---
title: Возможные проблемы
---

### Серверный рендеринг

SvelteKit сначала отрисовывает каждый компонент на стороне сервера и отправляет его на клиент в виде HTML кода. Затем он снова запускает компонент на стороне клиента, чтобы позволить ему обновляться на основе динамических данных. Поэтому необходимо убедиться, что компоненты могут работать как на стороне клиента, так и на стороне сервера.

Например, если компоненты попытаются получить доступ к глобальным переменным `document` или `window`, это приведёт к ошибке, так как страница предварительно рендерится на стороне сервера.

Если нужен доступ к этим переменным, можно запустить код только на стороне клиента, обернув его таким образом:

```js
import { browser } from '$app/env';

if (browser) {
	// код только для клиентской части
}
```

В качестве альтернативы можно запустить его в функции `onMount`, поскольку она работает только в браузере. Это также хороший способ загрузить библиотеки, зависящие от объекта `window`:

```html
<script>
	import { onMount } from 'svelte';

	let awkward;

	onMount(async () => {
		const module = await import('some-browser-only-library');
		awkward = module.default;
	});
</script>
```
